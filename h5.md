# Lab and simulation environments in attacks

# A) Tools
Familiarize yourself with the tool: **Evilginx** <https://github.com/kgretzky/evilginx2>     
Answer the following questions:
- Did you install the tool, and how did you do it?
- What did you do with the tool?
- Were you succesfull in spoofing traffic?

### Walkthrough
I installed the tool on my Kali-VM (the VM uses a bridged adapter).      

Install using:
```
$ sudo apt install evilginx2
```
- <img width="790" height="339" alt="Screenshot from 2025-11-23 22-54-42" src="https://github.com/user-attachments/assets/fd806af2-a535-4322-a8e5-c0b70777d464" />     

Launch by typing:
```
$ evilginx2
```
- <img width="994" height="612" alt="Screenshot from 2025-11-24 10-06-50" src="https://github.com/user-attachments/assets/ff14f7b3-09a2-4c9e-a96b-4fce0c6d1c90" />     
 
Set up domain and IP (i'm trying this out in my local network)
```
: config domain safe-domain
```
```
: config ipv4 external <ip-of-my-vm-running-evilginx>
```
 - <img width="905" height="146" alt="Screenshot from 2025-11-24 10-25-51" src="https://github.com/user-attachments/assets/da088d8e-538b-44b7-9d0d-2050c77c433a" />

Because i'm doing this in my own LAN, a simple config of `/etc/hosts` on the "victim" will do the trick. 
- <img width="480" height="246" alt="Screenshot from 2025-11-24 18-32-38" src="https://github.com/user-attachments/assets/aa2d44ab-002a-43d9-afa8-7d951aab4d16" />
- <img width="793" height="233" alt="Screenshot from 2025-11-24 22-19-05" src="https://github.com/user-attachments/assets/7008c467-8fbc-43a4-9031-109dca3ed735" />


I asked chatGPT to make me a dummy login site which I can use for in my own LAN. I had it create me a python flask app I can use for testing purposes.
### The dummy site works:
- <img width="1036" height="149" alt="Screenshot from 2025-11-24 22-04-44" src="https://github.com/user-attachments/assets/94dc1900-f76e-423b-a1a9-352ba2f436f3" />
- <img width="1226" height="421" alt="Screenshot from 2025-11-24 18-48-13" src="https://github.com/user-attachments/assets/091aa1d0-f20f-439a-94ab-5a92651047a5" />

## But does attack work?
I had so many problems getting evilginx to work with my ssl snakeoil certs
- <img width="1184" height="509" alt="Screenshot from 2025-11-24 18-51-32" src="https://github.com/user-attachments/assets/2255015f-e149-4e9c-b64e-358edd7a57c5" />
- So I had to give them up and disabled TLS.     

This is the final setup I went with:
```bash
$ cat /usr/share/evilginx2/phishlets/dummy.yaml
```
**File:** `dummy.yaml`
```yaml
name: 'dummy'
author: 'aliG'
min_ver: '3.0.0'

proxy_hosts:
  - phish_sub: 'login'
    orig_sub: ''
    domain: 'safe-domain.com'
    session: true
    is_landing: true
    auto_filter: true

sub_filters:
  - phish_sub: 'login'
    orig_sub: ''
    triggers_on: 'login'
    domain: 'safe-domain.com'
    mimes: ['text/html', 'application/json', 'text/plain']
    search: 'safe-domain.com'
    replace: 'login.safe-domain.com'

auth_tokens:
  - name: 'sessionid'
    domain: 'safe-domain.com'
    path: '/'
    keys: ['sessionid']

credentials:
  username:
    key: 'username'
    search: '(.*)'
    type: 'post'
  password:
    key: 'password'
    search: '(.*)'
    type: 'post'

login:
  domain: 'safe-domain.com'
  path: '/login'

disable_tls: true
```

**File:** `~/.evilginx/config.json`
```json
{
  "blacklist": {
    "mode": "unauth"
  },
  "general": {
    "autocert": false,
    "bind_ipv4": "192.168.1.123",
    "dns_port": 53,
    "domain": "safe-domain.com",
    "external_ipv4": "192.168.1.123",
    "https_port": 443,
    "ipv4": "192.168.1.123",
    "redirect_http": false,
    "redirect_https": false,
    "ssl": false
  },
  "unauth_url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
  "gophish": {
    "admin_url": "",
    "api_key": "",
    "insecure": false
  },
  "phishlets": {
    "dummy": {
      "hostname": "safe-domain.com",
      "unauth_url": "",
      "enabled": true,
      "visible": true
    },
    "example": {
      "hostname": "",
      "unauth_url": "",
      "enabled": false,
      "visible": true
    }
  }
}       
```
## Execution:
- <img width="758" height="368" alt="Screenshot from 2025-11-24 22-15-52" src="https://github.com/user-attachments/assets/cb6395aa-078b-46b2-b3a3-5c1ff66980af" />
- But no, keeps timing out...
  - <img width="1129" height="651" alt="Screenshot from 2025-11-24 22-18-27" src="https://github.com/user-attachments/assets/0bebf411-e434-42af-815e-c918c9dd29e7" />

### Conclusion:
- This task was a fail for me, I spent hours doing it, and didn't get to finish it.
- But it is what it is, we live and we learn!
- I guess you can't run this without TLS. Which is a bummer as I couldn't even get to test it.



**Sources:**
- <https://www.kali.org/tools/evilginx2/>
- <https://cilynx.com/how-to/evilginx2-vs-2fa-phishing/1908/>
- <https://github.com/kgretzky/evilginx2/wiki/FAQ>
- ChatGPT, Prompt: "Create me a dummy app I can use for testing evilginx"
   



# B) Mininet
Have to get back to this one!    
To be continued....
