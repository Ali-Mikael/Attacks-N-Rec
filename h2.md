# H2 Purple rain     

## X) Read and summarize    
**x.1 The Pyramid of Pain**
> <https://detect-respond.blogspot.com/2013/03/the-pyramid-of-pain.html>
- A pyramid illustrating indicators used to detect an adversary's actions.
- The "pain level" indicates how much pain you will cause the adversary when denying it those indicators.
- <img width="410" height="260" alt="Screenshot 2025-10-30 at 11 43 22" src="https://github.com/user-attachments/assets/01ef0960-b35c-44a9-88c1-808e41e2c804" />      

<br> 

**x.2 The Diamond Model of Intrusion Analysis**
> <https://www.threatintel.academy/wp-content/uploads/2020/07/diamond-model.pdf>
- The *diamond model* is a framework for intrusion analysis, consisting of 4 **core features** used to describe an **event**, which can further be identified as malicious activity. 
- Idea is to deepen the understanding of intrusions to better analyze them.
- <img width="697" height="520" alt="Screenshot 2025-10-30 at 11 42 42" src="https://github.com/user-attachments/assets/b46581b6-5022-4711-afb0-a8c31139ff0f" />


## A) Apache Log
Downloading Apache can be done w:
```
$ sudo apt install apache2
```
Start apache and check that it's running:
```
$ sudo systemctl start apache2
$ systemctl status apache2
```
- <img width="390" height="73" alt="Screenshot 2025-10-30 at 15 28 00" src="https://github.com/user-attachments/assets/a114fd39-8646-4726-add1-3fd0735c9854" />     
- <img width="1055" height="650" alt="Screenshot 2025-10-30 at 15 22 58" src="https://github.com/user-attachments/assets/66a9b891-adfa-4d57-ad68-1e9f90d4023a" />       

Checking the access logs
```
$ cat /var/log/apache2/access.log
```
- <img width="1032" height="192" alt="Screenshot 2025-10-30 at 15 39 40" src="https://github.com/user-attachments/assets/46d80158-3e40-4c8d-83f4-9cbfe9c63c3b" />
- We can see stuff like
  - Who made the request.
  - When the request was made.
  - Type of request.
  - Status code.
  - Size of response.
  - User agent.
**Let's take the first line into consideration**
- Client (us): `127.0.0.1` indicating localhost.
- Request was made on the last thursday of october 2025.
- The `GET / HTTP/1.1` line tells us: Client used the `Get` method for the root document using `HTTP version 1.1`.
- The number after that is the `http status code`. `200` indicating = `OK` (request succeeded).
- Yet another number after the status code tells us the size of the response = `3383 bytes`.
- The hyphen is the `referer` (which is nonexistent on the first line because the request came in directly).
  - An example of the referer can be noted in the second log entry: `"http://localhost/"`
  -  **Q:** What is a referer?
  -  **A:** It indicates to us the **previous website**, which is *linked* to the current website/resource being requested.
- The last piece of information tells us the user agent. Browser & OS details of the client etc..     
<br> 
Sources used:
> <https://www.sumologic.com/blog/apache-access-log> <br> 
> <https://www.geeksforgeeks.org/techtips/http-headers-referer/> <br>      



## B) Nmapped

